# ============================================================================
# IMPETUS COMUNICA IA - VARIÁVEIS DE AMBIENTE
# ============================================================================
# Copie este arquivo para .env e preencha com suas credenciais
# NUNCA commite o arquivo .env no Git!
# ============================================================================

# ====================
# APLICAÇÃO
# ====================
NODE_ENV=development
PORT=3000
FRONTEND_URL=http://localhost:5173

# ====================
# BANCO DE DADOS POSTGRESQL
# ====================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=impetus_db
DB_USER=postgres
DB_PASSWORD=91043066

# Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=10

# ====================
# SEGURANÇA E AUTENTICAÇÃO
# ====================
# Salt para hash de senhas (gere uma string aleatória única)
SALT=impetus_salt_TROQUE_POR_STRING_ALEATORIA_2025

# Chave para criptografia AES-256 de dados sensíveis no banco (tokens, API keys)
# Mínimo 32 caracteres. Use: openssl rand -base64 32
ENCRYPTION_KEY=

# JWT Secret (se usar JWT no futuro)
JWT_SECRET=seu_jwt_secret_TROQUE_POR_STRING_ALEATORIA

# ====================
# LICENCIAMENTO
# ====================
# URL do servidor central de validação de licenças
LICENSE_SERVER_URL=https://licenca.impetus.com.br/api/validate

# API Key para autenticar requisições do servidor ao sistema de licenças
LICENSE_API_KEY=sua_api_key_para_sistema_licencas

# Desabilitar validação de licença (use false em desenvolvimento - NUNCA em produção)
LICENSE_VALIDATION_ENABLED=false

# Chave de licença da instalação (validada pelo servidor central)
LICENSE_KEY=sua_chave_de_licenca_aqui

# Tempo de expiração de sessões (em horas)
SESSION_EXPIRATION_HOURS=24

# ====================
# OPENAI API (IA INTEGRADA)
# ====================
OPENAI_API_KEY=sk-proj-...

# Modelo padrão
OPENAI_MODEL=gpt-4o-mini

# Modelo de embeddings
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# ====================
# IA DE COLETA PLC (IA 2)
# ====================
# Segunda API Key - exclusiva para análise de dados de equipamentos
# NÃO executa outras funções: só acessa manuais, coleta dados e analisa
PLC_AI_KEY=sk-proj-...
PLC_AI_MODEL=gpt-4o-mini

# ====================
# ASAAS (COBRANÇA E ASSINATURAS)
# ====================
# API Key do Asaas ( produção: api.asaas.com | sandbox: api-sandbox.asaas.com )
ASAAS_API_KEY=sua_api_key_asaas
# Token para validar webhooks do Asaas (evita falsificação)
ASAAS_WEBHOOK_TOKEN=token_seguranca_webhook_asaas
# production ou sandbox
ASAAS_ENV=sandbox

# ====================
# Z-API (WHATSAPP BUSINESS)
# ====================
# IMPORTANTE: Cada empresa terá suas próprias credenciais Z-API
# Estas são credenciais padrão/fallback. As empresas devem configurar 
# suas próprias credenciais no painel administrativo.

ZAPI_DEFAULT_URL=https://api.z-api.io
ZAPI_INSTANCE_ID=sua_instance_id_aqui
ZAPI_INSTANCE_TOKEN=seu_instance_token_aqui
ZAPI_CLIENT_TOKEN=seu_client_token_aqui

# Webhook (URL que o Z-API vai chamar)
ZAPI_WEBHOOK_URL=https://seu-dominio.com/api/webhook
ZAPI_WEBHOOK_TOKEN=token_seguranca_webhook_aleatorio

# Retenção de logs para manutenção (dias) - scripts/maintenance.js
AUDIT_LOG_RETENTION_DAYS=90

# URL base para health-check (scripts/health-check.js)
BASE_URL=http://localhost:4000

# ====================
# LGPD E COMPLIANCE
# ====================
# Email do encarregado de dados (DPO)
DATA_CONTROLLER_EMAIL=dpo@sua-empresa.com

# Prazo para resposta de solicitações LGPD (em dias)
LGPD_RESPONSE_DAYS=15

# ====================
# UPLOADS E ARQUIVOS
# ====================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760
# 10MB = 10 * 1024 * 1024

# Tipos de arquivo permitidos
ALLOWED_FILE_TYPES=pdf,doc,docx,png,jpg,jpeg

# ====================
# EMAIL (OPCIONAL - ativação comercial)
# ====================
# Configurar para envio automático de credenciais ao ativar clientes
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=seu-email@gmail.com
SMTP_PASSWORD=sua_senha_app
# Ou SMTP_PASS=sua_senha_app
SMTP_FROM=noreply@impetus.com.br

# ====================
# LOGS E MONITORAMENTO
# ====================
LOG_LEVEL=info
# debug, info, warning, error, critical

# Sentry (opcional)
SENTRY_DSN=

# OCR para PDFs escaneados (fallback quando pdf-parse falha)
OCR_ENABLED=false

# ====================
# CACHE E PERFORMANCE
# ====================
# Limite de entradas no cache em memória (LRU) - evita crescimento indefinido
CACHE_MAX_ENTRIES=1000

# Timeout HTTP para serviços externos (Z-API, etc) - ms
HTTP_TIMEOUT_MS=15000
HTTP_RETRIES=3
# Redis (opcional - para cache e sessões)
REDIS_URL=redis://localhost:6379
REDIS_ENABLED=false

# ====================
# DESENVOLVIMENTO
# ====================
# Ativar logs detalhados
DEBUG=false

# Ativar CORS para todos os origins (apenas dev)
CORS_ALL_ORIGINS=true

# ====================
# PRODUÇÃO
# ====================
# SSL/TLS
SSL_ENABLED=false
SSL_KEY_PATH=
SSL_CERT_PATH=

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=900000
# 15 minutos

# ============================================================================
# FIM DAS VARIÁVEIS DE AMBIENTE
# ============================================================================
